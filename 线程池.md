# 线程池

### 概念

​	多线程程序高并发执行时，频繁创建和销毁线程大大消耗了系统的性能，因此，创建一个线程完成任务之后并不销毁，而是等待下一个任务，达到线程服用。

### 原理

​	将创建并且完成任务的线程保存到一个集合中，当我们想要使用线程的时候，可以从集合中取出来使用，集合一般使用LinkedList或者ArrayList，集合对象就是Thread。

```java
Thread t = list.remove();//将线程从集合中移除，remove方法取得移除的线程，因为线程只能被一个任务调用
```

线程使用完毕之后归还给集合（队列）

```java
list.add(t);//列表归还
linked.addLast(t);//链表归还
```

**PS：**JDK1.5之后，内置了线程池，可直接使用

![image-20200927184832486](/Users/yangxiansheng/笔记/images/image-20200927184832486.png)

合理使用线程池能够带来三个好处：

1. 降低资源消耗，减少了创建和销毁线程的次数，
2. 提高响应速度，当任务到达时，任务可以不需要等到线程创建就能立即执行。
3. 提高线程的可管理性，可以根据系统的承受能力，调整线程池中工作线程的数目，防止因为消耗过多的内存而导致服务器宕机（每个线程需要大约1MB内存）

### 线程池的使用步骤

1. 使用线程池工厂类java.util.concurrent.Executor的静态方法newFixedThreadPool生产一个指定数量的线程池，返回值是ExecutorService：线程池接口
2. 创建一个类，实现Runnable接口，重写run方法，设置线程任务
3. 调用ExecutorService的submit方法，传递线程任务（实现类），开启线程。

